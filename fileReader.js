
var readImage = function(data) {
	this.Multiselect = data.Multiselect || false;
	this.filterImageType = data.filterImageType || ['image/png', 'image/jpg', 'image/bmp','image/jpeg'];
	this.Container = document.querySelector(data.Container) || document.querySelector('body');
	this.imageLength = 0;
	this.files = null;
	this.maxNum = data.maxNum;
	this.currentPage = null;
	this.ImageBase64Arr = [];
	this.readImageCallBack = data.readImageCallBack || null;
	this.uploadInput = null;
	this.allFileImageMap = {};
	this.allFile = [];
	this.unInitialization = data.unInitialization && true;
	
	if(!this.unInitialization){
		//创建实例时直接初始化
		this.init()
	}
}
readImage.prototype.init = function() {
	var _this = this;
	var uploadInput = document.createElement('input');
	this.uploadInput = uploadInput;
	var uploadDiv = document.createElement('div');
	var uploadDivImage = document.createElement('img');
	uploadDivImage.src = 'data:image/png;base64,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'
	uploadDiv.className = 'addImage';
	uploadInput.type = 'file';
	uploadInput.style.display = 'none';
	uploadInput.accept = this.filterImageType.join(',');
	if(this.Multiselect) {
		uploadInput.multiple = 'multiple';
	}
	uploadDiv.appendChild(uploadDivImage)
	this.Container.appendChild(uploadInput)

	this.Container.appendChild(uploadDiv)
	uploadInput.onchange = function(ev) {
		var files = ev.target.files;
		_this.files = files;
		if(_this.maxImageNum()) {
			for(var i = 0; i < files.length; i++) {
				_this.addImage(files[i])
			}
		}
		_this.updateInput()
		
	}
	uploadDiv.onclick = function() {
		_this.uploadInput.click()
	}
	
	this.ImagePage()
};
//刷新文件选择input file,避免不能选择同一文件
readImage.prototype.updateInput = function(){
	this.Container.removeChild(this.uploadInput);
	var newUploadInput = document.createElement('input');
	newUploadInput.type = 'file';
	newUploadInput.accept = this.filterImageType.join(',');
	this.uploadInput = newUploadInput;
	this.uploadInput.style.display = 'none';
	if(this.Multiselect) {
		this.uploadInput.multiple = 'multiple';
	}
	this.Container.insertBefore(newUploadInput,this.Container.firstChild)  
	var _this = this;
	this.uploadInput.onchange = function(ev) {
		var files = ev.target.files;
		_this.files = files;
		var currentCount = files.length;
		if(_this.maxImageNum(currentCount)) {
			for(var i = 0; i < files.length; i++) {
				_this.addImage(files[i])
			}
		}
	}
}
//添加input file图片
readImage.prototype.addImage = function(file) {
	this.imageLength++ ;
	var _this = this;
	if(this.currentPage){
		this.currentPage.innerHTML = this.imageLength;
	}
	
	var ImagesDiv = document.createElement('div');//图片盒子
	var imageProgress = document.createElement('div');//进度条
	var imageProgressSpan = document.createElement('span');//进度
	ImagesDiv.className = 'ImageDiv';
	imageProgress.className = 'imageProgress';
	var imageIndex = Math.floor(new Date().getTime());
	ImagesDiv.dataset.index = imageIndex;
	var Image = document.createElement('img');
	Image.className = 'readImage';
	var cutImageBtn = document.createElement('div');
	var cutImage = document.createElement('img');
	cutImageBtn.className = 'cutImage';
	cutImage.src = 'data:image/png;base64,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'
	cutImageBtn.style.display = 'none';
	cutImageBtn.appendChild(cutImage);
	imageProgress.appendChild(imageProgressSpan);
	ImagesDiv.appendChild(imageProgress);
	var fr = new FileReader();
	fr.onloadend = function(e) {
		var base64Image = e.target.result;
		Image.src = base64Image;
		ImagesDiv.appendChild(Image);
		ImagesDiv.appendChild(cutImageBtn);
		imageProgressSpan.style.width = '100%';
		imageProgress.style.opacity = '0';
		
		if(_this.readImageCallBack){
			//图片完成回调
			_this.readImageCallBack(file,base64Image,Image)
			_this.allFileImageMap[imageIndex] = file;			
		}
	};
	this.Container.insertBefore(ImagesDiv,this.Container.lastChild)
	fr.readAsDataURL(file);
	//显示/隐藏删除按钮
	ImagesDiv.onmouseenter = function() {
		cutImageBtn.style.display = 'block';
	}
	ImagesDiv.onmouseleave = function() {
		cutImageBtn.style.display = 'none';
	}
	//删除图片
	cutImageBtn.onclick = function() {
		_this.imageLength--;
		if(_this.currentPage){
			//更新显示数量
			_this.currentPage.innerHTML = _this.imageLength;
		}
		//删除file对象
		delete _this.allFileImageMap[imageIndex]

		//删除dom结构
		_this.Container.removeChild(ImagesDiv)
		_this.updateInput()
	}
}
//添加src图片
readImage.prototype.loadImage = function(src) {
	this.imageLength++ ;
	var _this = this;
	if(this.currentPage){
		this.currentPage.innerHTML = this.imageLength;
	}
	var ImagesDiv = document.createElement('div');//图片盒子
	ImagesDiv.className = 'ImageDiv';
	var Image = document.createElement('img');
	Image.className = 'readImage';
	Image.src = src;
	var cutImageBtn = document.createElement('div');
	var cutImage = document.createElement('img');
	cutImageBtn.className = 'cutImage';
	cutImage.src = 'data:image/png;base64,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'
	cutImageBtn.style.display = 'none';
	cutImageBtn.appendChild(cutImage);
	ImagesDiv.appendChild(Image);
	ImagesDiv.appendChild(cutImageBtn);
	this.Container.insertBefore(ImagesDiv,this.Container.lastChild)
//	fr.readAsDataURL(file);
	//显示/隐藏删除按钮
	ImagesDiv.onmouseenter = function() {
		cutImageBtn.style.display = 'block';
	}
	ImagesDiv.onmouseleave = function() {
		cutImageBtn.style.display = 'none';
	}
	//删除图片
	cutImageBtn.onclick = function() {
		_this.imageLength--;
		if(_this.currentPage){
			_this.currentPage.innerHTML = _this.imageLength;
		}
		_this.Container.removeChild(ImagesDiv)
		_this.updateInput()
	}
	return Image;

}
readImage.prototype.maxImageNum = function(currentCount) {
	if( !this.maxNum )return true;
	if(this.files.length > this.maxNum) {
		if(window.layer){
			layer.msg('最多选择' + this.maxNum + '个图片',{icon : 2,time : 1500});
		}else{
			alert('最多选择' + this.maxNum + '个图片');
		}
		
		return false;
	}
	if(this.imageLength >= this.maxNum || this.imageLength + currentCount > this.maxNum) {

		if(window.layer){
			layer.msg('最多选择' + this.maxNum + '个图片',{icon : 2,time : 1500});
		}else{
			alert('最多选择' + this.maxNum + '个图片');
		}
		
		return false;
	} else {
		return true;
	}
}
readImage.prototype.ImagePage = function(){
	if( !this.maxNum )return true;
	var uploadImagePage = document.createElement('div');
	uploadImagePage.className = 'uploadImagePage';
	var uoloadImageMax =  document.createElement('span');
	uoloadImageMax.innerHTML = '/'+ this.maxNum;
	var currentPage = document.createElement('span');
	currentPage.innerHTML = 0;
	this.currentPage = currentPage;
	uploadImagePage.appendChild(currentPage);
	uploadImagePage.appendChild(uoloadImageMax);
	this.Container.appendChild(uploadImagePage);
}

readImage.prototype.getAllFile = function(){
	var allFile = [];
	var allFileImageMap = this.allFileImageMap;
	for(key in this.allFileImageMap){
		allFile.push(this.allFileImageMap[key])
	}
	return allFile;
}
//将base64格式图片转换为文件形式
//function dataURLtoBlob(dataurl) {
//	var arr = dataurl.split(','),
//	mime = arr[0].match(/:(.*?);/)[1],
//	fileExt = mime.split('/')[1],
//	bstr = atob(arr[1]),
//	n = bstr.length,
//	u8arr = new Uint8Array(n);
//	while(n--) {
//		u8arr[n] = bstr.charCodeAt(n);
//	}
//	
//	return new File([u8arr],"123."+fileExt,{type:mime});
//  
//}

